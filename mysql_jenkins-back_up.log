Started by user Taras
Obtained mysql_backup.jenkinsfile from git https://github.com/TarasKindrat/my_task.git
Running in Durability level: MAX_SURVIVABILITY
[Pipeline] Start of Pipeline
[Pipeline] properties
[Pipeline] node
Running on Jenkins in /var/lib/jenkins/workspace/Mysql_backup
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Declarative: Checkout SCM)
[Pipeline] checkout
Selected Git installation does not exist. Using Default
The recommended git tool is: NONE
No credentials specified
 > git rev-parse --is-inside-work-tree # timeout=10
Fetching changes from the remote Git repository
 > git config remote.origin.url https://github.com/TarasKindrat/my_task.git # timeout=10
Fetching upstream changes from https://github.com/TarasKindrat/my_task.git
 > git --version # timeout=10
 > git --version # 'git version 2.25.1'
 > git fetch --tags --force --progress -- https://github.com/TarasKindrat/my_task.git +refs/heads/*:refs/remotes/origin/* # timeout=10
 > git rev-parse refs/remotes/origin/master^{commit} # timeout=10
Checking out Revision ebc708128b867e61881a94a763b68b4194b71733 (refs/remotes/origin/master)
 > git config core.sparsecheckout # timeout=10
 > git checkout -f ebc708128b867e61881a94a763b68b4194b71733 # timeout=10
Commit message: "Update mysql_backup.jenkinsfile"
 > git rev-list --no-walk bd10ed3f0ddcba31a5b79049cd5980b3b20b801a # timeout=10
[Pipeline] }
[Pipeline] // stage
[Pipeline] withEnv
[Pipeline] {
[Pipeline] withCredentials
Masking supported pattern matches of $FTP_HOST_CREDS or $FTP_HOST_CREDS_USR or $FTP_HOST_CREDS_PSW or $MYSQL_USER_CREDS or $MYSQL_USER_CREDS_USR or $MYSQL_USER_CREDS_PSW or $MYSQL_HOST_CREDS or $MYSQL_HOST_CREDS_USR or $MYSQL_HOST_CREDS_PSW
[Pipeline] {
[Pipeline] sh
+ date +%Y-%m-%d-%H-%M-%S
[Pipeline] sh
+ date +%Y-%m-%d-%H-%M-%S
[Pipeline] withEnv
[Pipeline] {
[Pipeline] timestamps
[Pipeline] {
[Pipeline] stage
[Pipeline] { (Get date and time)
[Pipeline] echo
[2021-04-16T07:55:25.649Z] Backup name is: 
[Pipeline] echo
[2021-04-16T07:55:25.657Z] mysql_2021-04-16-10-55-25.sql.gz
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Make backup)
[Pipeline] sh
[2021-04-16T07:55:25.946Z] + /usr/bin/gzip
[2021-04-16T07:55:25.946Z] + mysqldump --opt --protocol=TCP --user=**** --password=**** --host=**** ****
[2021-04-16T07:55:25.946Z] mysqldump: [Warning] Using a password on the command line interface can be insecure.
[Pipeline] sh
[2021-04-16T07:55:26.215Z] + ls -la
[2021-04-16T07:55:26.215Z] total 72
[2021-04-16T07:55:26.215Z] drwxr-xr-x  4 jenkins jenkins 4096 Apr 16 10:55 .
[2021-04-16T07:55:26.215Z] drwxr-xr-x 11 jenkins jenkins 4096 Apr 15 18:46 ..
[2021-04-16T07:55:26.215Z] drwxr-xr-x  3 jenkins jenkins 4096 Apr 16 00:30 docker
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  154 Apr 16 00:30 Docker-clean.sh
[2021-04-16T07:55:26.215Z] drwxr-xr-x  8 jenkins jenkins 4096 Apr 16 10:55 .git
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins 2209 Apr 15 18:46 jenkins_node_deploy.jenkinsfile
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  825 Apr 15 18:46 jenkins_node.jenkinsfile
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  542 Apr 15 18:46 jenkins_pipe
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins 1490 Apr 15 18:46 jenkins_run_docker.jenkins
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  986 Apr 16 10:55 mysql_2021-04-16-10-55-25.sql.gz
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins 3285 Apr 16 10:55 mysql_backup.jenkinsfile
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins 7489 Apr 16 10:19 mysql_jenkins-back_up.log
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  985 Apr 15 23:33 .null
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  985 Apr 15 23:51 null
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins 1442 Apr 15 18:46 pipeline2.jenkins
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins  980 Apr 15 18:46 pipeline.jenkins
[2021-04-16T07:55:26.215Z] -rw-r--r--  1 jenkins jenkins   10 Apr 15 18:46 README.md
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Upload to ftp)
[Pipeline] sh
[2021-04-16T07:55:26.542Z] + ftp-upload -h 192.168.56.11 -u **** --password **** -d mysql_backup mysql_2021-04-16-10-55-25.sql.gz
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Remove backup from Jenkins)
[Pipeline] echo
[2021-04-16T07:55:26.628Z] Before remov backup
[Pipeline] sh
[2021-04-16T07:55:26.892Z] + grep mysql_
[2021-04-16T07:55:26.892Z] + ls -la
[2021-04-16T07:55:26.892Z] -rw-r--r--  1 jenkins jenkins  986 Apr 16 10:55 mysql_2021-04-16-10-55-25.sql.gz
[2021-04-16T07:55:26.892Z] -rw-r--r--  1 jenkins jenkins 3285 Apr 16 10:55 mysql_backup.jenkinsfile
[2021-04-16T07:55:26.892Z] -rw-r--r--  1 jenkins jenkins 7489 Apr 16 10:19 mysql_jenkins-back_up.log
[2021-04-16T07:55:26.892Z] + rm mysql_2021-04-16-10-55-25.sql.gz
[2021-04-16T07:55:26.892Z] + echo After remov backup
[2021-04-16T07:55:26.892Z] After remov backup
[2021-04-16T07:55:26.892Z] + grep mysql_
[2021-04-16T07:55:26.892Z] + ls -la
[2021-04-16T07:55:26.892Z] -rw-r--r--  1 jenkins jenkins 3285 Apr 16 10:55 mysql_backup.jenkinsfile
[2021-04-16T07:55:26.892Z] -rw-r--r--  1 jenkins jenkins 7489 Apr 16 10:19 mysql_jenkins-back_up.log
[2021-04-16T07:55:26.892Z] + pwd
[2021-04-16T07:55:26.892Z] /var/lib/jenkins/workspace/Mysql_backup
[Pipeline] }
[Pipeline] // stage
[Pipeline] stage
[Pipeline] { (Check file on FTP)
[Pipeline] sh
[2021-04-16T07:55:27.192Z] + lftp -p 21 -u ****,**** 192.168.56.11/mysql_backup
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          986 Apr 16 10:55 mysql_2021-04-16-10-55-25.sql.gz
[2021-04-16T07:55:27.193Z] drwxr-xr-x    2 1001     1001         4096 Apr 16 10:55 .
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          986 Apr 16 10:54 mysql_2021-04-16-10-54-09.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          987 Apr 16 10:53 mysql_2021-04-16-10-53-27.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          987 Apr 16 10:49 mysql_2021-04-16-10-49-55.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          986 Apr 16 10:44 mysql_2021-04-16-10-44-44.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          986 Apr 16 10:40 mysql_2021-04-16-10-40-26.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          987 Apr 16 10:19 mysql_2021-04-16-10-19-42.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          985 Apr 16 00:40 mysql_2021-04-16-00-39-55.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          985 Apr 16 00:36 mysql_2021-04-16-00-36-26.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          985 Apr 16 00:32 mysql_2021-04-16-00-32-18.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          984 Apr 16 00:10 mysql_2021-04-16-00-10-08.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          984 Apr 16 00:08 mysql_2021-04-16-00-08-20.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          985 Apr 16 00:04 mysql_2021-04-16-00-04-30.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          984 Apr 16 00:02 mysql_2021-04-16-00-02-10.sql.gz
[2021-04-16T07:55:27.193Z] -rw-r--r--    1 1001     1001          984 Apr 16 00:01 mysql_2021-04-16-00-01-05.sql.gz
[2021-04-16T07:55:27.193Z] drwxr-xr-x    3 1001     1001         4096 Apr 15 23:38 ..
[Pipeline] }
[Pipeline] // stage
[Pipeline] }
[Pipeline] // timestamps
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // withCredentials
[Pipeline] }
[Pipeline] // withEnv
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
